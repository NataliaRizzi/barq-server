(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{190:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),i=(a(90),a(8)),l=a(9),s=a(11),u=a(10),m=a(12),d=(a(91),a(92),a(29)),p=a(38),h=a(81),f=a.n(h),g=a(82),E=a.n(g),v=a(17),b=a.n(v),y=a(48),w=a.n(y),N=a(6),S=a.n(N),k=a(25),B=a.n(k),C=a(39),I=a.n(C),j=a(73),x=a.n(j),O=a(74),M=a.n(O),_=a(75),D=a.n(_),L=a(76),T=a.n(L),A=a(77),R=a.n(A),P=a(78),G=a.n(P),H=a(79),U=a.n(H),z=Object(p.createMuiTheme)({palette:{primary:{main:"#ea0e48"},secondary:{main:"#ffffff"},error:{main:"#ea0e48"}},typography:{fontFamily:["Quicksand","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),useNextVariants:!0}}),Q={root:{flexGrow:1},grow:{flexGrow:1},content:{flexGrow:1,padding:3*z.spacing.unit,height:"100vh"},appBar:{background:"transparent",boxShaddow:"none"},appBarSticky:{color:"primary"},paperContainer:{backgroundImage:"url(".concat(x.a,")"),backgroundSize:"cover",height:"100vh",padding:3*z.spacing.unit,display:"flex",alignItems:"center"},card:{flexGrow:1,height:400,padding:3*z.spacing.unit},adminCard:{height:500},bartenderCard:{height:500},media:{height:"100%",paddingTop:"56,25%",marginTop:"20"},appBarSpacer:{height:"5vh"}};function F(e){var t=e.handleScroll;return r.a.createElement("div",{style:{width:"100vw"}},r.a.createElement(S.a,{container:!0,alignItems:"center",alignContent:"center",justify:"center"},r.a.createElement(S.a,{item:!0,sm:8,xs:10},r.a.createElement("div",{align:"center"},r.a.createElement(b.a,{variant:"h1",color:"secondary",gutterBottom:!0,component:"h2"},"BarQ"),r.a.createElement(b.a,{variant:"h4",color:"secondary",gutterBottom:!0},"Smarter, simpler service at your favourite bars."),r.a.createElement(w.a,{onClick:t,variant:"contained",color:"secondary",gutterBottom:!0},"Learn More")))))}function q(e){var t=e.classes;return r.a.createElement(S.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(S.a,{item:!0,lg:3,md:3,sm:6,xs:10},r.a.createElement("div",null,r.a.createElement(b.a,{align:"center",variant:"h4",color:"primary",gutterBottom:!0,component:"h2"},"Easy to order."," ",r.a.createElement("br",null),"Easy to pay."),r.a.createElement(b.a,{align:"left",variant:"body2",color:"inherit",gutterBottom:!0},"BarQ allows you to order and pay for drinks from your phone wherever you are in the bar. No more fighting through crowds and waiting to catch a bartenders' attention. Browse the menu and place your order without leaving your seat. You\u2019ll be notified as soon as your order is ready to pick up."))),r.a.createElement(S.a,{item:!0,lg:3,md:3,sm:4,xs:6},r.a.createElement("div",null,r.a.createElement(B.a,{className:t.card,image:M.a}))),r.a.createElement(S.a,{item:!0,lg:3,md:3,sm:4,xs:6},r.a.createElement("div",null,r.a.createElement(B.a,{className:t.card,image:D.a}))),r.a.createElement(S.a,{item:!0,lg:3,md:3,sm:4,xs:6},r.a.createElement("div",null,r.a.createElement(B.a,{className:t.card,image:T.a}))))}function J(e){var t=e.classes;return r.a.createElement(S.a,{container:!0,alignItems:"center",justify:"center"},r.a.createElement(S.a,{item:!0,lg:3,md:8,sm:8,xs:10},r.a.createElement("div",null,r.a.createElement(b.a,{align:"center",variant:"h4",color:"primary",gutterBottom:!0,component:"h2"},"Easy to set up."),r.a.createElement(b.a,{align:"left",variant:"body2",color:"inherit",gutterBottom:!0},"BarQ provides a user friendly interface for bar owners to manage different menus across multiple bars, all in one place."))),r.a.createElement(S.a,{item:!0,lg:5,md:8,sm:10,xs:12},r.a.createElement("div",{align:"center"},r.a.createElement(B.a,{className:t.adminCard,image:R.a}))))}function Y(e){var t=e.classes;return r.a.createElement(S.a,{container:!0,alignItems:"center",justify:"center"},r.a.createElement(S.a,{item:!0,lg:4,md:8,sm:8,xs:10},r.a.createElement("div",null,r.a.createElement(b.a,{align:"center",variant:"h4",color:"primary",gutterBottom:!0,component:"h2"},"Easy to manage."),r.a.createElement(b.a,{align:"left",variant:"body2",color:"inherit",gutterBottom:!0},"A live feed of current orders shows you what to prepare next. You can update the status of orders with one click, sending live updates to let your customer know when their drink is ready."))),r.a.createElement(S.a,{item:!0,lg:3,md:6,sm:6,xs:12},r.a.createElement("div",{align:"center"},r.a.createElement(B.a,{className:t.bartenderCard,image:G.a}))),r.a.createElement(S.a,{item:!0,lg:3,md:6,sm:6,xs:12},r.a.createElement("div",{align:"center"},r.a.createElement(B.a,{className:t.bartenderCard,image:U.a}))))}var V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleScroll=function(){window.scrollTo({top:a.myRef.current.offsetTop,behavior:"smooth"})},a.state={isTop:!0},a.handleScroll=a.handleScroll.bind(Object(d.a)(Object(d.a)(a))),a.myRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("scroll",function(){var t=e.myRef.current&&window.scrollY<e.myRef.current.offsetTop-65;t!==e.state.isTop&&e.onScroll(t)})}},{key:"onScroll",value:function(e){this.setState({isTop:e})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.toggleLogin,n=this.state.isTop;return r.a.createElement("div",{className:t.root},r.a.createElement(p.MuiThemeProvider,{theme:z},r.a.createElement("div",{className:t.paperContainer},r.a.createElement(f.a,{className:n?t.appBar:t.appBarSticky,position:"fixed"},r.a.createElement(E.a,null,r.a.createElement(b.a,{variant:"h4",color:"secondary",className:t.grow},"BarQ"),r.a.createElement(w.a,{onClick:a,variant:"contained",color:"secondary"},"Sign Up/Log in"))),r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(F,{handleScroll:this.handleScroll,classes:t})),r.a.createElement("main",{ref:this.myRef,className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(q,{classes:t}),r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(I.a,null),r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(J,{classes:t}),r.a.createElement(I.a,null),r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(Y,{classes:t}),r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(I.a,null),r.a.createElement("div",{className:t.appBarSpacer}))))}}]),t}(n.Component),W=Object(p.withStyles)(Q)(V),$=a(13),K=a.n($),X=a(18),Z=a(84),ee=function(e){var t=e.barData,a=e.deleteBar,n=e.selectBar;return r.a.createElement("div",{className:"barListItem"},r.a.createElement("h2",null,t.name),r.a.createElement("p",null,t._id),r.a.createElement("button",{className:"clicker",id:"selectBar",type:"button",onClick:function(){return n(t)}},"Select Bar"),r.a.createElement("button",{className:"clicker",id:"deleteBar",type:"button",onClick:function(){return a(t._id)}},"Delete Bar"))},te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){"name"===t?a.setState({name:e.target.value}):"currency"===t&&a.setState({currency:e.target.value})},a.state={name:null,currency:"EUR"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.addBar;return r.a.createElement("div",{className:"addBarForm"},r.a.createElement("h3",null,"Add a New Bar"),r.a.createElement("form",{className:"addBarForm"},r.a.createElement("input",{className:"addBarInput",type:"text",placeholder:"Name",onChange:function(t){return e.handleChange(t,"name")}}),r.a.createElement("input",{className:"addBarInput",type:"text",placeholder:"Currency",value:"EUR",onChange:function(t){return e.handleChange(t,"currency")}}),r.a.createElement("input",{className:"clicker",id:"addBar",type:"submit",value:"Add Bar",onClick:function(a){return t(a,e.state)}})))}}]),t}(n.Component),ae=function(e){var t=e.data,a=e.deleteBar,n=e.selectBar,c=e.addBar;return r.a.createElement("div",{className:"barList"},r.a.createElement("h1",null,"My Bars"),t.bars?t.bars.map(function(e){return r.a.createElement(ee,{barData:e,deleteBar:a,selectBar:n,key:e._id})}):null,r.a.createElement(te,{addBar:c}))},ne=a(83),re=a.n(ne),ce=a(36),oe=function(e){var t=e.data;return r.a.createElement("div",null,r.a.createElement("h3",null,t.name),t.items?t.items.map(function(e){return r.a.createElement("div",{key:e.name,className:"menuListItemDetail"},r.a.createElement("p",null,e.name),r.a.createElement("p",null,"\u20ac",e.price))}):null)},ie=function(e){var t=e.data,a=e.deleteMenu,n=e.activateMenu,c=e.barId;return r.a.createElement("div",{className:"menuListItem"},r.a.createElement("div",{className:"menuListItemHeader"},r.a.createElement("h2",null,t.name)),t.categories.map(function(e){return r.a.createElement(oe,{key:e.name,data:e})}),r.a.createElement("div",null,n?r.a.createElement("button",{type:"submit",className:"clicker",id:"selectMenu",onClick:function(){return n(c,t._id)}},n?"Make Active Menu":"ACTIVE MENU"):null,r.a.createElement("button",{type:"submit",className:"clicker",id:"deleteMenu",onClick:function(){return a(c,t._id)}},"Delete Menu")))},le=function(e){return e.reduce(function(e,t){return e[t[2]]||(e[t[2]]=[]),e[t[2]].push({name:t[0],price:t[1]}),e},{})},se=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={file:null,menuName:"",error:""},a.onChangeName=function(e){a.setState({menuName:e.nativeEvent.target.value})},a.onFileChange=function(e){var t=e.target.files;a.setState({file:t[0]})},a.onSubmit=function(){var e=Object(X.a)(K.a.mark(function e(t){var n,r,c,o;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state,r=n.file,c=n.menuName,t.preventDefault(),r?((o=new FileReader).onload=function(){var e=o.result;re()({noheader:!1,output:"csv"}).fromString(e).then(function(e){var t=a.props,n=t.barId,r=t.addMenu,o=Object.entries(le(e)).map(function(e){return{name:e[0],items:e[1]}});r({name:c,categories:o},n)})},o.readAsBinaryString(r)):a.setState({error:"You must choose a file"});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.deleteMenu,n=e.activateMenu,c=e.barId,o=e.activeMenu,i=this.state.error;return r.a.createElement("div",{className:"menuContainer"},r.a.createElement("h1",null,"My Menus"),o?r.a.createElement("div",{className:"activeMenuCard"},r.a.createElement(ie,{data:o,deleteMenu:a,barId:c})):null,r.a.createElement("div",null,t?t.map(function(e){if(!o||e._id!==o._id)return r.a.createElement(ie,{key:e._id,data:e,deleteMenu:a,activateMenu:n,barId:c})}):null),r.a.createElement("form",{className:"addMenuForm"},r.a.createElement("div",{className:"addMenuHeaderContainer"},r.a.createElement("h2",{id:"addMenuHeader"},"Add a New Menu"),r.a.createElement(ce.a,{trigger:r.a.createElement("div",{className:"iSym"},"\u24d8"),position:"center"},r.a.createElement("div",{className:"infoPopup"},"Please upload a\xa0",r.a.createElement("u",null,"CSV file"),"\xa0of three columns:",r.a.createElement("ol",null,r.a.createElement("li",{className:"infoLi"},r.a.createElement("u",null,"Name:"),"\xa0the name of the individual menu item"),r.a.createElement("li",{className:"infoLi"},r.a.createElement("u",null,"Price:"),"\xa0the price of the item in numbers only"),r.a.createElement("li",{className:"infoLi"},r.a.createElement("u",null,"Category:"),"\xa0the menu category of the item"))))),r.a.createElement("input",{className:"addMenuInput",type:"text",placeholder:"Name",onChange:this.onChangeName}),r.a.createElement("input",{className:"addMenuInput",type:"file",accept:".csv",name:"file",onChange:this.onFileChange}),r.a.createElement("input",{className:"clicker",id:"addMenu",type:"submit",value:"Add Menu",onClick:this.onSubmit}),i))}}]),t}(r.a.Component),ue=function(e){var t=e.barId,a=e.generateStaffCode,n=e.staffCode;return r.a.createElement("div",{className:"staffContainer"},r.a.createElement("div",{className:"leftBarPoster"},r.a.createElement("h1",null,"Staff Login"),r.a.createElement("h3",null,"Share your unique staff login code with your bar staff to log in to the bartender interface.")),r.a.createElement("div",{className:"rightBarPoster"},r.a.createElement("button",{className:"clickerSmall",id:"generateStaffCode",type:"button",value:"Generate code",onClick:function(e){e.preventDefault(),a(t)}},"Get New Login Code"),n?r.a.createElement("p",{id:"newStaffCode"},n):r.a.createElement("p",null,"Staffcode hidden")))},me=a(49),de=a.n(me),pe=function(e){var t=e.data,a="http://192.168.1.136:3002/".concat(t._id);return r.a.createElement("div",{className:"barPoster"},r.a.createElement("div",{className:"leftBarPoster"},r.a.createElement("h1",null,t.name),r.a.createElement(de.a,{value:a}),r.a.createElement("h3",null,a)),r.a.createElement("div",{className:"rightBarPoster"},r.a.createElement("h2",null,"How does it work?"),r.a.createElement("h3",null,"Display your unique QR code and URL in your bar for customers to order their drinks."),r.a.createElement(ce.a,{className:"qr-popup",trigger:r.a.createElement("button",{className:"clickerSmall",id:"generatePoster",type:"button"},"Generate Poster"),modal:!0,contentStyle:{width:"auto"}},r.a.createElement("div",{className:"qr-popup__left"},r.a.createElement("h1",null,t.name),r.a.createElement(de.a,{value:a,size:256}),r.a.createElement("h1",null,a)),r.a.createElement("div",{className:"qr-popup__right"},r.a.createElement("h1",null,"1. Scan the QR Code or browse to the URL"),r.a.createElement("h1",null,"2. Select your drink and pay"),r.a.createElement("h1",null,"3. Pick up your drinks when they are ready"),r.a.createElement("h1",null,"4. Enjoy your drinks")))))},he=function(e){var t=e.history,a=e.refreshHistory;return r.a.createElement("div",{className:"orderHistory"},r.a.createElement("input",{className:"clickerSmall",id:"refreshHistory",type:"submit",value:"Refresh history",onClick:a}),r.a.createElement("table",{className:"orderHistory__table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{id:"thOrder"},"#"),r.a.createElement("th",{id:"thDate"},"Date"),r.a.createElement("th",{id:"thTime"},"Time"),r.a.createElement("th",{id:"thItems"},"Items"),r.a.createElement("th",{id:"thTotal"},"Total")),t.length>0?t.map(function(e,t){var a=new Date(e.timestamp),n=a.toLocaleDateString("en-GB"),c=a.toLocaleTimeString("en-GB");return r.a.createElement("tr",{key:e.orderId,className:"tr".concat(t%2)},r.a.createElement("td",null,e.orderId),r.a.createElement("td",null,n),r.a.createElement("td",null,c),r.a.createElement("td",{className:"orderHistory__itemrow"},e.items.map(function(e){return r.a.createElement("div",{key:e.name},"".concat(e.quantity,"x ").concat(e.name," (").concat(e.quantity,"x \u20ac").concat(e.price,")"))})),r.a.createElement("td",null,"\u20ac ".concat(e.total.toFixed(2))))}).reverse():null)))},fe=function(e){var t=e.barId,a=e.iban,n=e.updateIban;return r.a.createElement("div",{className:"staffContainer"},r.a.createElement("div",{className:"leftBarPoster"},r.a.createElement("h1",null,"Order History and Payment"),r.a.createElement("h3",null,"Add your IBAN number for payment."),a?r.a.createElement("p",{id:"existingIban"},"Existing IBAN:",a):r.a.createElement("p",{id:"existingIban"},"No IBAN added yet")),r.a.createElement("div",{className:"rightBarPoster"},r.a.createElement("form",{className:"addIBAN",onSubmit:function(e){e.preventDefault();var a=e.nativeEvent.target[0].value;n(t,a)}},r.a.createElement("input",{id:"ibanTextField",type:"text",placeholder:"IBAN"}),r.a.createElement("button",{className:"clickerSmall",id:"addIban",type:"submit"},"Add New IBAN"))))},ge=function(e){var t=e.data,a=e.addMenu,n=e.deleteMenu,c=e.activateMenu,o=e.generateStaffCode,i=e.staffCode,l=e.updateIban,s=e.refreshHistory;return r.a.createElement("div",{className:"barDetails"},r.a.createElement(se,{data:t.menus,activeMenu:t.activeMenu,barId:t._id,addMenu:a,deleteMenu:n,activateMenu:c}),r.a.createElement("div",{className:"barDetailsRightPanel"},r.a.createElement(pe,{data:t}),r.a.createElement(ue,{data:t.staff,barId:t._id,generateStaffCode:o,staffCode:i}),r.a.createElement(fe,{barId:t._id,iban:t.iban,updateIban:l}),r.a.createElement(he,{history:t.history,refreshHistory:s})))},Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).getOwnerData=function(){var e=a.props.token;return fetch("/owner/me",{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){return a.setState({ownerData:e.user})})},a.addBar=function(e,t){e.preventDefault();var n=a.props.token;fetch("/owner/bars",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){return a.setState({ownerData:e})})},a.deleteBar=function(e){var t=a.props.token,n=a.state.activeBar;fetch("/owner/bars/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(e){return a.setState({ownerData:e})}).then(function(){n&&e===n._id&&a.setState({activeBar:null})})},a.selectBar=function(e){a.setState({activeBar:e,staffCode:null})},a.addMenu=function(e,t){var n=a.props.token;fetch("/owner/bars/".concat(t,"/menus"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){a.setState({ownerData:e,activeBar:e.bars.find(function(e){return e._id===t})})})},a.deleteMenu=function(e,t){var n=a.props.token,r=a.state.ownerData;fetch("/owner/bars/".concat(e,"/menus/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}}).then(function(){var n=r.bars.find(function(t){return t._id===e}),c=n.menus.filter(function(e){return e._id!==t});n.menus=c,n.activeMenu&&n.activeMenu._id===t&&(n.activeMenu=null),a.setState({activeBar:n})})},a.activateMenu=function(e,t){var n=a.props.token;fetch("/owner/bars/".concat(e,"/menus/").concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){return e.json()}).then(function(e){var t=a.state.activeBar,n=e.bars.find(function(e){return e._id===t._id});a.setState({ownerData:e,activeBar:n})})},a.generateStaffCode=function(e){var t=a.props.token;fetch("/owner/bars/".concat(e,"/code"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(e){return a.setState({staffCode:e})})},a.updateIban=function(e,t){var n=a.props.token,r=a.state.activeBar;fetch("/owner/bars/".concat(e,"/iban"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({iban:t})}).then(function(e){return e.json()}).then(function(e){a.setState({activeBar:Object(Z.a)({},r,{iban:e})}),a.getOwnerData()})},a.refreshHistory=Object(X.a)(K.a.mark(function e(){var t,n;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getOwnerData();case 2:t=a.state,n=t.activeBar,t.ownerData.bars.forEach(function(e){n._id===e._id&&a.setState({activeBar:e})});case 4:case"end":return e.stop()}},e)})),a.componentDidMount=function(){a.getOwnerData()},a.state={ownerData:{},activeBar:null,staffCode:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.logout,t=this.state,a=t.activeBar,n=t.ownerData,c=t.staffCode;return r.a.createElement("div",null,r.a.createElement("div",{className:"dashboardHeader"},r.a.createElement("div",{className:"headerLogo"},"BarQ"),r.a.createElement("button",{className:"clicker",type:"button",id:"logout",onClick:e},"Log out")),r.a.createElement("div",{className:"dashboard"},r.a.createElement(ae,{data:n,addBar:this.addBar,deleteBar:this.deleteBar,selectBar:this.selectBar}),a?r.a.createElement(ge,{data:a,staffCode:c,generateStaffCode:this.generateStaffCode,addMenu:this.addMenu,deleteMenu:this.deleteMenu,activateMenu:this.activateMenu,updateIban:this.updateIban,refreshHistory:this.refreshHistory}):r.a.createElement("div",{className:"welcomeToDash"},r.a.createElement("h3",null,"Welcome to your BarQ dashboard."),"Add a new bar or select an existing one to begin.")))}}]),t}(n.Component),ve=a(37),be=a.n(ve),ye=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",name:"",password:"",passwordRepeat:"",error:"",success:""},a.onChange=function(e){var t={};t[e.target.name]=e.target.value,a.setState(t)},a.onSubmit=function(){var e=Object(X.a)(K.a.mark(function e(t){var n,r,c,o,i;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),n=a.state,r=n.email,c=n.name,o=n.password,a.passwordMatch){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,fetch("/owner",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,name:c,password:o})});case 7:if(500!==(i=e.sent).status){e.next=10;break}throw new Error("Server error");case 10:if(401!==i.status){e.next=12;break}throw new Error("Email taken");case 12:a.setState({success:"Account created!"}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),a.setState({error:e.t0.message});case 18:case"end":return e.stop()}},e,null,[[0,15]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.name,n=e.password,c=e.passwordRepeat,o=e.error,i=e.success,l=this.props.toggleLogin;return r.a.createElement("div",{className:"welcome"},r.a.createElement("div",{className:"loginContainer"},r.a.createElement("img",{src:be.a,width:"180",alt:"BarQ"}),r.a.createElement("div",{className:"leftLogin"},r.a.createElement("form",{className:"welcome__login",onSubmit:this.onSubmit},!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"loginInput",placeholder:"Email",type:"text",name:"email",value:t,onChange:this.onChange}),r.a.createElement("input",{className:"loginInput",placeholder:"Name",type:"text",name:"name",value:a,onChange:this.onChange}),r.a.createElement("input",{className:"loginInput",placeholder:"Password",type:"password",name:"password",value:n,onChange:this.onChange}),r.a.createElement("input",{className:"loginInput",placeholder:"Repeat Password",type:"password",name:"passwordRepeat",value:c,onChange:this.onChange})),this.passwordMatch||r.a.createElement("div",{className:"loginError"},"Passwords do not match!"),""!==o&&r.a.createElement("div",{className:"loginError"},o),""!==i&&r.a.createElement("div",{className:"loginSuccess"},i),!i&&r.a.createElement("input",{className:"clicker",type:"submit"}),r.a.createElement("button",{type:"submit",className:"clicker signUp",onClick:l},"Log In")))))}},{key:"passwordMatch",get:function(){var e=this.state;return e.password===e.passwordRepeat}}]),t}(n.Component),we=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",error:"",message:""},a.autoLogIn=function(){var e=Object(X.a)(K.a.mark(function e(t){var n,r,c,o,i;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.props,r=n.setSession,c=n.toggleDashboard,e.next=4,fetch("/owner/me",{method:"GET",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});case 4:return o=e.sent,e.next=7,o.json();case 7:i=e.sent,r(i.user,t),c(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}(),a.onChange=function(e){var t={};t[e.target.name]=e.target.value,a.setState(t)},a.onSubmit=function(){var e=Object(X.a)(K.a.mark(function e(t){var n,r,c,o,i,l,s,u,m;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),n=a.state,r=n.email,c=n.password,o=a.props,i=o.setSession,l=o.toggleDashboard,s=btoa("".concat(r,":").concat(c)),e.next=7,fetch("/owner",{method:"GET",headers:{authorization:"Basic ".concat(s),"Content-Type":"application/json"}});case 7:if(500!==(u=e.sent).status){e.next=10;break}throw new Error("Server error");case 10:if(401!==u.status){e.next=12;break}throw new Error("Please check your credentials");case 12:return e.next=14,u.json();case 14:m=e.sent,window.localStorage.setItem("token",m.token),i(r,m.token),l(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),a.setState({error:e.t0.message});case 23:case"end":return e.stop()}},e,null,[[0,20]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.token,t=window.localStorage.getItem("token");t&&this.autoLogIn(t),e&&this.autoLogIn()}},{key:"componentDidUpdate",value:function(e){var t=this.props.token;e.token!==t&&this.autoLogIn()}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,c=e.message,o=this.props.toggleRegister;return r.a.createElement("div",{className:"welcome"},r.a.createElement("div",{className:"loginContainer"},r.a.createElement("img",{src:be.a,width:"180",alt:"BarQ"}),r.a.createElement("div",{className:"leftLogin"},r.a.createElement("form",{className:"welcome__login"},r.a.createElement("input",{className:"loginInput",placeholder:"Email",type:"text",name:"email",value:t,onChange:this.onChange}),r.a.createElement("input",{className:"loginInput",placeholder:"Password",type:"password",name:"password",value:a,onChange:this.onChange}),""!==n&&r.a.createElement("div",{className:"loginError"},n),""!==c&&r.a.createElement("div",{className:"loginMessage"},c),r.a.createElement("input",{className:"clicker",type:"submit",onClick:this.onSubmit,value:"LET'S GO"}),r.a.createElement("button",{className:"clicker signUp",type:"button",onClick:o},"Need an account?")))))}}]),t}(n.Component),Ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={user:null,authPage:"login",token:null,page:"LANDING"},a.renderLogin=function(){return r.a.createElement(we,{toggleRegister:function(){return a.setState({page:"REGISTER"})},toggleDashboard:function(){return a.setState({page:"DASHBOARD"})},setSession:function(e,t){return a.setState({user:e,token:t})}})},a.renderRegister=function(){return r.a.createElement(ye,{toggleLogin:function(){return a.setState({page:"LOGIN"})},toggleRegister:function(){return a.setState({page:"REGISTER"})},setSession:function(e,t){return a.setState({user:e,token:t})}})},a.renderDashboard=function(){return r.a.createElement(Ee,{user:a.state.user,token:a.state.token,logout:a.logout,updateUser:a.updateUser})},a.renderLanding=function(){return r.a.createElement(W,{toggleLogin:function(){return a.setState({page:"LOGIN"})}})},a.switch={LOGIN:a.renderLogin,REGISTER:a.renderRegister,DASHBOARD:function(){return a.state.user&&a.state.token?a.renderDashboard():a.renderLogin()},LANDING:a.renderLanding},a.logout=function(){a.setState({user:null,authPage:"login",token:null}),window.localStorage.removeItem("token")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.page;return r.a.createElement("div",{className:"App"},this.switch[e]())}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},37:function(e,t,a){e.exports=a.p+"static/media/SmallLogo.18448fd2.png"},73:function(e,t,a){e.exports=a.p+"static/media/BarQBg.9f9ff71b.png"},74:function(e,t,a){e.exports=a.p+"static/media/IMG_2876_iphonexspacegrey_portrait.c83e9738.png"},75:function(e,t,a){e.exports=a.p+"static/media/IMG_2878_iphonexspacegrey_portrait.25bba090.png"},76:function(e,t,a){e.exports=a.p+"static/media/IMG_2880_iphonexspacegrey_portrait.83cc317f.png"},77:function(e,t,a){e.exports=a.p+"static/media/admin_screenshot.a4ee0870.png"},78:function(e,t,a){e.exports=a.p+"static/media/Selection_018_ipadmini_white_portrait.bc024afe.png"},79:function(e,t,a){e.exports=a.p+"static/media/Selection_019_ipadmini_white_portrait.b32b1a0c.png"},85:function(e,t,a){e.exports=a(190)},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){e.exports=a.p+"static/media/LightSmallLogo.9b63349c.png"}},[[85,1,2]]]);
//# sourceMappingURL=main.436a32fb.chunk.js.map